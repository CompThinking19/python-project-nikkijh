I see the logic of what you're doing here, and your code itself seems fairly sound at this point. I don't yet see the big picture, and part of that is due to your comments. They're numerous, which is good and will prove useful in the long run, but they are much more about "what" than "why"; I don't have any solid sense of how these pieces will fit together in the final program or, for example, the intended types of your function arguments or return values. Let's talk in person about the overall structure of this project and where these individual pieces might fit together in it.
